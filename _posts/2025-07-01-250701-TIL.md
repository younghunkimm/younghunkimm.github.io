---
title: "[ë¯¸ë‹ˆí”„ë¡œì íŠ¸] íŒŒì´ì–´ë² ì´ìŠ¤ë¥¼ ì´ìš©í•œ ëŒ“ê¸€ ê¸°ëŠ¥ ìƒ˜í”Œ ì œì‘"
categories: [ë‚´ì¼ë°°ì›€ìº í”„, ë‚´ì¼ë°°ì›€ìº í”„/Project]
tags: [JS, Firebase, NoSQL, HTML, CSS, TIL]
date: '2025-07-01 21:09:00 +0900'
---

## ğŸš€ JS ì½”ë“œ

---

```js
// Firebase SDK ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°€ì ¸ì˜¤ê¸°
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
import {
    getFirestore,
    collection,
    doc,
    addDoc,
    query,
    where,
    orderBy,
    getDocs,
    setDoc,
    serverTimestamp,
} from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";


// Firebase êµ¬ì„± ì •ë³´ ì„¤ì •
const firebaseConfig = {
    ...
};


// Firebase ì¸ìŠ¤í„´ìŠ¤ ì´ˆê¸°í™”
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);



// íŒŒë¼ë¯¸í„° ê°€ì ¸ì˜¤ê¸°
// í˜„ì¬ëŠ” ì„ì‹œë¡œ íŒŒë¼ë¯¸í„°ë¡œ ì²˜ë¦¬
// ì¶”í›„ ê°œì¸ ê²Œì‹œë¬¼ì˜ í‚¤ê°’ìœ¼ë¡œ ë³€ê²½ì˜ˆì •
function getQueryParam(key) {
    const params = new URLSearchParams(window.location.search);
    return params.get(key);
}

const key = getQueryParam('key');
const targetId = key || "main";

console.log("targetId: ", targetId);



// ëŒ“ê¸€ ë“±ë¡
export async function registerComment(commentText) {
    const docData = {
        targetId,
        comment: commentText,
        createdAt: serverTimestamp()
    };
    
    const docRef = await addDoc(collection(db, "comments"), docData);

    // ìƒì„±ëœ ë¬¸ì„œ ID
    const newId = docRef.id;

    // ID í•„ë“œ ì¶”ê°€
    await setDoc(doc(db, "comments", newId), {
        id: newId,
        ...docData
    })
}


// ëŒ“ê¸€ ê°€ì ¸ì˜¤ê¸°
export async function loadComments(callback) {
    const q = query(
        collection(db, "comments"),
        where("targetId", "==", targetId),
        orderBy("createdAt", "asc")
    );

    const querySnapshot = await getDocs(q);
    querySnapshot.forEach(doc => {
        callback(doc.data());
    });
}


// Input Enter Event
$('#commentInput').keypress(function (e) {
    if (e.which === 13) { // 13ì€ Enter í‚¤ ì½”ë“œ
        e.preventDefault();
        $('#commentButton').click();
    }
});
```

## ğŸš€ HTML ì½”ë“œ

---

```html
<head>
    <script type="module">
        import { registerComment, loadComments } from '../js/comments.js';

        const $commentList = $('#commentList');
        const $commentButton = $('#commentButton');

        // ë“±ë¡ ë²„íŠ¼
        $commentButton.click(async function () {
            const comment = $('#commentInput').val();

            await registerComment(comment);

            window.location.reload();
        });

        // ëŒ“ê¸€ ê°€ì ¸ì˜¤ê¸°
        if ($commentList.length > 0) {
            $commentList.empty();

            await loadComments((row) => {
                const id = row.id || "";
                const comment = row.comment;
                
                const tempHtml = `<li data-id="${id}">${comment}</li>`;
                $commentList.append(tempHtml);
            });

            // ëŒ“ê¸€ì˜ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ë¥¼ ìµœí•˜ë‹¨ìœ¼ë¡œ ì´ë™
            $commentList.scrollTop($commentList.prop("scrollHeight"))
        }
    </script>
</head>

<body>
    <!-- ìƒ˜í”Œì´ê¸°ì— ì¼ë‹¨ í‚¤ ê°’ì€ URL ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¡œ ëŒ€ì²´ -->
    <a href="?key=">ë©”ì¸</a>
    <a href="?key=A">A</a>
    <a href="?key=B">B</a>

    <ul id="commentList">
        <li>1</li>
        <li>2</li>
        <li>3</li>
    </ul>

    <div id="commentInputGroup">
        <input type="text" name="" id="commentInput" placeholder="ëŒ“ê¸€ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.">
        <button type="button" id="commentButton"><img src="../images/icon_send.svg"></button>
    </div>
</body>
```

## ğŸš€ CSS ì½”ë“œ

---

```css
#commentList {
    list-style: none;
    padding: 0;
    margin: 0;

    display: flex;
    flex-direction: column;
    align-items: flex-end;

    max-height: 400px;

    overflow: auto;
}

#commentList > li {
    position: relative;

    width: max-content;
    padding: 5px 15px;
    margin: 5px 10px 5px 0;

    background-color: #e5e5e5;
    border-radius: 12px;

    font-size: 16px;
    line-height: 24px;
}

#commentList > li::before {
    content: "";

    position: absolute;
    right: 0;
    bottom: 2px;
    transform: translateX(50%) rotate(10deg);

    width: auto;
    height: auto;

    /* background-color: red; */

    border: 10px solid transparent;
    border-left-color: #e5e5e5;
    border-right: 0;
    border-bottom: 0;
    
    box-sizing: border-box;
}

#commentInputGroup {
    display: flex;

    padding: 0 10px;
    margin: 10px 0;
    border: 1px solid #dedede;
    border-radius: 1000px;
}

#commentInput {
    border: 0;
    background: none;
    outline: none;

    width: 100%;
    height: 40px;
    padding: 0 10px;

    font-size: 16px;
}

#commentButton {
    flex-shrink: 0;
    
    border: 0;
    background: none;
    padding: 0;
    margin: 0;

    width: 40px;
    height: 40px;

    cursor: pointer;
}

#commentButton img {
    width: 50%;
    height: 50%;
    object-fit: contain;
}
```

## ğŸš€ Firebase êµ¬ì¡°

---

![Image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FetNYh5%2FbtsO0f8np7O%2FAAAAAAAAAAAAAAAAAAAAAGfvE3OEEzphHtDxrqnY_gQPNwoa8wGKvfZ0M6wo3H_Q%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1753973999%26allow_ip%3D%26allow_referer%3D%26signature%3DhFQ1yokJooZL8IDpRSPLwXJDBtI%253D)

- `content`: ëŒ“ê¸€ì˜ ë‚´ìš©
- `createdAt`: ë“±ë¡ì¼ì
- `id`: ëŒ“ê¸€ì˜ ìœ ë‹ˆí¬í‚¤ ê°’
- `targetId`: ëŒ“ê¸€ì´ ì¶œë ¥ë  ëŒ€ìƒì˜ ìœ ë‹ˆí¬í‚¤ ê°’

## ğŸš€ ê²°ê³¼

---

> B ë§í¬ë¥¼ ëˆŒë €ì„ ë•Œ ì¶œë ¥ë˜ëŠ” ëŒ“ê¸€ë“¤

![Image](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FXnv9R%2FbtsO0TwWOJ5%2FAAAAAAAAAAAAAAAAAAAAANUd5PDqUWC4nTJu9zo5F3h4ZAsPO-5Gqge_g9gCeURZ%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1753973999%26allow_ip%3D%26allow_referer%3D%26signature%3DDcuwrAUTeTMH0SwFvubdGHHcaeQ%253D)