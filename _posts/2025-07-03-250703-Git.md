---
title: "[Git] 3. reset & revert"
categories: [Git, Git/Guide]
tags: [Git, Github, reset, revert, TIL]
date: '2025-07-03 21:21:00 +0900'
---

## 🚀 차이점

---

| 명령어 | 목적                        | 작동 방식                                          | 히스토리            |
| ------ | --------------------------- | -------------------------------------------------- | ------------------- |
| reset  | 커밋 자체를 없애거나 되돌림 | 브랜치 HEAD를 과거 커밋으로 이동                   | 히스토리 **수정됨** |
| revert | 되돌리는 새 커밋을 생성     | 지정 커밋의 변경 사항을 반대로 적용한 새 커밋 생성 | 히스토리 **보존됨** |

### 언제 써야 할까?

- `reset`: 로컬 작업 히스토리를 수정하고 싶을 때
- `revert`: 이미 push한 브랜치에서 취소하고 싶을 때

## 🛠️ git reset

---

- 브랜치 포인터(HEAD)를 과거 커밋으로 이동해서 그 이후 커밋을 삭제
- 로컬 히스토리를 강제로 바꾸기 때문에 **공유된 브랜치에는 사용 X**
- 모드에 따라 작동 범위가 달라진다.
  - `--soft`: HEAD만 이동 → 작업 디렉토리와 스테이징 영역은 그대로
  - `--mixed`: HEAD 이동 + 스테이징 초기화 → 작업 디렉토리는 그대로 <span style="color: orange;">(기본값)</span>
  - `--hard`: HEAD 이동 + 스테이징 초기화 + 작업 디렉토리까지 되돌림 → 위험!

### 예제

```bash
# 마지막 커밋을 없애고 스테이징은 유지
git reset --soft HEAD~1

# 마지막 커밋을 없애고 스테이징 초기화
git reset HEAD~1

# 마지막 커밋을 없애고 작업 내용도 전부 되돌림 (주의!)
git reset --hard HEAD~1
```

### 상세 예시

#### 상황: 실수로 커밋했는데, 다시 작업하던 상태로 되돌리고 싶을 때

- 예를 들어 커밋이 이렇게 되어있을 때

  ```plaintext
  A -- B -- C (HEAD)
  ```

- `HEAD` 는 `C` 커밋을 가리키고 있고, `C` 커밋을 없애고 싶다면

1. `git reset --soft HEAD~1`
   - `HEAD`가 `B`로 이동
   - `C` 커밋은 없어지지만 **작업 내용과 스테이징은 유지됨**

   ```plaintext
   A -- B (HEAD)
   ```
   - 작업 파일과 스테이징에 변경사항 남아서 다시 커밋 가능

2. `git reset --mixed HEAD~1`
   - `HEAD`가 `B`로 이동
   - `C` 커밋 사라지고, 스테이징 영역은 초기화됨
   - 작업 파일은 그대로 (수정 상태로 남아 있음)

## 🛠️ git revert

---

- 기존 커밋은 유지하고, 그 커밋을 취소하는 내용의 새 커밋을 추가함
- 안전하게 기록을 되돌릴 수 있어, 이미 `push`한 브랜치에서도 사용 가능
- 협업 중에는 `reset` 대신 `revert` 권장!

### 예제

```bash
# 특정 커밋 되돌리는 새 커밋 생성
git revert 커밋해시

# 예) 마지막 커밋 되돌리기
git revert HEAD
```

### 상세 예시

#### 상황: 이미 원격 저장소에 푸시한 커밋 C를 취소하고 싶을 때

- `C` 커밋을 삭제하면 히스토리가 꼬이니까, 취소 커밋을 만들어서 되돌린다

  ```plaintext
  A -- B -- C -- D (HEAD)
                  ↑ revert 커밋 D    
  ```

- `git revet C` 명령어가 `C` 커밋의 변경 내용을 반대로 적용한 D 커밋을 새로 만드는 것
- 협업 중인 프로젝트에서 안전하게 취소할 수 있다
